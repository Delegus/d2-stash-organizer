import{A as e,W as t,M as n,R as o,U as r,S as s,a as i,b as a,c as l,I as c,d as u,P as d,G as f,e as h,C as p,f as m,g as v}from"./game-data-cd564084.js";var _,g,b,w,y,k={},x=[],S=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function O(e,t){for(var n in t)e[n]=t[n];return e}function $(e){var t=e.parentNode;t&&t.removeChild(e)}function q(e,t,n,o,r){var s={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r??++_.__v};return null!=_.vnode&&_.vnode(s),s}function j(e){return e.children}function N(e,t){this.props=e,this.context=t}function P(e,t){if(null==t)return e.__?P(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?P(e):null}function C(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return C(e)}}function E(e){(!e.__d&&(e.__d=!0)&&g.push(e)&&!M.__r++||w!==_.debounceRendering)&&((w=_.debounceRendering)||b)(M)}function M(){for(var e;M.__r=g.length;)e=g.sort((function(e,t){return e.__v.__b-t.__v.__b})),g=[],e.some((function(e){var t,n,o,r,s,i;e.__d&&(s=(r=(t=e).__v).__e,(i=t.__P)&&(n=[],(o=O({},r)).__v=r.__v+1,B(i,r,o,t.__n,void 0!==i.ownerSVGElement,null!=r.__h?[s]:null,n,s??P(r),r.__h),R(n,r),r.__e!=s&&C(r)))}))}function I(e,t,n,o,r,s,i,a,l,c){var u,d,f,h,p,m,v,_=o&&o.__k||x,g=_.length;for(n.__k=[],u=0;u<t.length;u++)if(null!=(h=n.__k[u]=null==(h=t[u])||"boolean"==typeof h?null:"string"==typeof h||"number"==typeof h||"bigint"==typeof h?q(null,h,null,null,h):Array.isArray(h)?q(j,{children:h},null,null,null):h.__b>0?q(h.type,h.props,h.key,null,h.__v):h)){if(h.__=n,h.__b=n.__b+1,null===(f=_[u])||f&&h.key==f.key&&h.type===f.type)_[u]=void 0;else for(d=0;d<g;d++){if((f=_[d])&&h.key==f.key&&h.type===f.type){_[d]=void 0;break}f=null}B(e,h,f=f||k,r,s,i,a,l,c),p=h.__e,(d=h.ref)&&f.ref!=d&&(v||(v=[]),f.ref&&v.push(f.ref,null,h),v.push(d,h.__c||p,h)),null!=p?(null==m&&(m=p),"function"==typeof h.type&&null!=h.__k&&h.__k===f.__k?h.__d=l=T(h,l,e):l=H(e,h,f,_,p,l),c||"option"!==n.type?"function"==typeof n.type&&(n.__d=l):e.value=""):l&&f.__e==l&&l.parentNode!=e&&(l=P(f))}for(n.__e=m,u=g;u--;)null!=_[u]&&("function"==typeof n.type&&null!=_[u].__e&&_[u].__e==n.__d&&(n.__d=P(o,u+1)),F(_[u],_[u]));if(v)for(u=0;u<v.length;u++)z(v[u],v[++u],v[++u])}function T(e,t,n){var o,r;for(o=0;o<e.__k.length;o++)(r=e.__k[o])&&(r.__=e,t="function"==typeof r.type?T(r,t,n):H(n,r,r,e.__k,r.__e,t));return t}function H(e,t,n,o,r,s){var i,a,l;if(void 0!==t.__d)i=t.__d,t.__d=void 0;else if(null==n||r!=s||null==r.parentNode)e:if(null==s||s.parentNode!==e)e.appendChild(r),i=null;else{for(a=s,l=0;(a=a.nextSibling)&&l<o.length;l+=2)if(a==r)break e;e.insertBefore(r,s),i=s}return void 0!==i?i:r.nextSibling}function L(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||S.test(t)?n:n+"px"}function A(e,t,n,o,r){var s;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof o&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||L(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||L(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])s=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?o||e.addEventListener(t,s?D:U,s):e.removeEventListener(t,s?D:U,s);else if("dangerouslySetInnerHTML"!==t){if(r)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=n??"";break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function U(e){this.l[e.type+!1](_.event?_.event(e):e)}function D(e){this.l[e.type+!0](_.event?_.event(e):e)}function B(e,t,n,o,r,s,i,a,l){var c,u,d,f,h,p,m,v,g,b,w,y=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(l=n.__h,a=t.__e=n.__e,t.__h=null,s=[a]),(c=_.__b)&&c(t);try{e:if("function"==typeof y){if(v=t.props,g=(c=y.contextType)&&o[c.__c],b=c?g?g.props.value:c.__:o,n.__c?m=(u=t.__c=n.__c).__=u.__E:("prototype"in y&&y.prototype.render?t.__c=u=new y(v,b):(t.__c=u=new N(v,b),u.constructor=y,u.render=W),g&&g.sub(u),u.props=v,u.state||(u.state={}),u.context=b,u.__n=o,d=u.__d=!0,u.__h=[]),null==u.__s&&(u.__s=u.state),null!=y.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=O({},u.__s)),O(u.__s,y.getDerivedStateFromProps(v,u.__s))),f=u.props,h=u.state,d)null==y.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(null==y.getDerivedStateFromProps&&v!==f&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(v,b),!u.__e&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(v,u.__s,b)||t.__v===n.__v){u.props=v,u.state=u.__s,t.__v!==n.__v&&(u.__d=!1),u.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),u.__h.length&&i.push(u);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(v,u.__s,b),null!=u.componentDidUpdate&&u.__h.push((function(){u.componentDidUpdate(f,h,p)}))}u.context=b,u.props=v,u.state=u.__s,(c=_.__r)&&c(t),u.__d=!1,u.__v=t,u.__P=e,c=u.render(u.props,u.state,u.context),u.state=u.__s,null!=u.getChildContext&&(o=O(O({},o),u.getChildContext())),d||null==u.getSnapshotBeforeUpdate||(p=u.getSnapshotBeforeUpdate(f,h)),w=null!=c&&c.type===j&&null==c.key?c.props.children:c,I(e,Array.isArray(w)?w:[w],t,n,o,r,s,i,a,l),u.base=t.__e,t.__h=null,u.__h.length&&i.push(u),m&&(u.__E=u.__=null),u.__e=!1}else null==s&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=function(e,t,n,o,r,s,i,a){var l,c,u,d,f=n.props,h=t.props,p=t.type,m=0;if("svg"===p&&(r=!0),null!=s)for(;m<s.length;m++)if((l=s[m])&&(l===e||(p?l.localName==p:3==l.nodeType))){e=l,s[m]=null;break}if(null==e){if(null===p)return document.createTextNode(h);e=r?document.createElementNS("http://www.w3.org/2000/svg",p):document.createElement(p,h.is&&h),s=null,a=!1}if(null===p)f===h||a&&e.data===h||(e.data=h);else{if(s=s&&x.slice.call(e.childNodes),c=(f=n.props||k).dangerouslySetInnerHTML,u=h.dangerouslySetInnerHTML,!a){if(null!=s)for(f={},d=0;d<e.attributes.length;d++)f[e.attributes[d].name]=e.attributes[d].value;(u||c)&&(u&&(c&&u.__html==c.__html||u.__html===e.innerHTML)||(e.innerHTML=u&&u.__html||""))}if(function(e,t,n,o,r){var s;for(s in n)"children"===s||"key"===s||s in t||A(e,s,null,n[s],o);for(s in t)r&&"function"!=typeof t[s]||"children"===s||"key"===s||"value"===s||"checked"===s||n[s]===t[s]||A(e,s,t[s],n[s],o)}(e,h,f,r,a),u)t.__k=[];else if(m=t.props.children,I(e,Array.isArray(m)?m:[m],t,n,o,r&&"foreignObject"!==p,s,i,e.firstChild,a),null!=s)for(m=s.length;m--;)null!=s[m]&&$(s[m]);a||("value"in h&&void 0!==(m=h.value)&&(m!==e.value||"progress"===p&&!m)&&A(e,"value",m,f.value,!1),"checked"in h&&void 0!==(m=h.checked)&&m!==e.checked&&A(e,"checked",m,f.checked,!1))}return e}(n.__e,t,n,o,r,s,i,l);(c=_.diffed)&&c(t)}catch(e){t.__v=null,(l||null!=s)&&(t.__e=a,t.__h=!!l,s[s.indexOf(a)]=null),_.__e(e,t,n)}}function R(e,t){_.__c&&_.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){_.__e(e,t.__v)}}))}function z(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){_.__e(e,n)}}function F(e,t,n){var o,r,s;if(_.unmount&&_.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||z(o,null,t)),n||"function"==typeof e.type||(n=null!=(r=e.__e)),e.__e=e.__d=void 0,null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){_.__e(e,t)}o.base=o.__P=null}if(o=e.__k)for(s=0;s<o.length;s++)o[s]&&F(o[s],t,n);null!=r&&$(r)}function W(e,t,n){return this.constructor(e,n)}function G(e,t,n,o,r){var s={};for(var i in t)"ref"!=i&&(s[i]=t[i]);var a,l,c={type:e,props:s,key:n,ref:t&&t.ref,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:++_.__v,__source:o,__self:r};if("function"==typeof e&&(a=e.defaultProps))for(l in a)void 0===s[l]&&(s[l]=a[l]);return _.vnode&&_.vnode(c),c}function J(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}_={__e:function(e,t){for(var n,o,r;t=t.__;)if((n=t.__c)&&!n.__)try{if((o=n.constructor)&&null!=o.getDerivedStateFromError&&(n.setState(o.getDerivedStateFromError(e)),r=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),r=n.__d),r)return n.__E=n}catch(t){e=t}throw e},__v:0},N.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=O({},this.state),"function"==typeof e&&(e=e(O({},n),this.props)),e&&O(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),E(this))},N.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),E(this))},N.prototype.render=j,g=[],b="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,M.__r=0,y=0;function Y(){return G("a",Object.assign({style:"float: right",href:"https://github.com/youdz/d2-stash-organizer","aria-label":"Source code on GitHub",target:"_blank"},{children:G("svg",Object.assign({style:"fill: white",height:"32",viewBox:"0 0 16 16",version:"1.1",width:"32","aria-hidden":"true"},{children:G("path",{"fill-rule":"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"},void 0)}),void 0)}),void 0)}function Q(o){const r=e[o.code]||t[o.code]||n[o.code];if(!r)throw new Error(`Could not find base ${o.code} for ${o.name}`);return r}J("h1{margin-top:0}.hidden{display:none}.button{appearance:none;margin:0;text-align:initial;cursor:pointer;box-shadow:none;padding:.4em .8em;border:2px solid #fff;border-radius:0;background:transparent;color:#fff;font-family:AvQuest,sans-serif;font-weight:700;font-size:16px;letter-spacing:1px;text-decoration:none}.magic{color:#6969ff}.rare{color:#ffff64}.unique{color:#c7b377}.set{color:#0f0}.crafted{color:#ffa800}.sidenote,.socketed{color:#787878}");const V=Array(10).fill(0).map(((e,t)=>t)),K=Array(10).fill(0).map(((e,t)=>t));function X(e,t=!1,n=!1){const o=new Map;let r=-1,s=0,i=0,a=0;function l(){r++,s=0,i=0,a=0}let c=!1;for(let u=0;u<e.length;u++){0===u||n?l():(s=a,(c||0<a&&a<3*(3-e.length+u))&&(c=!0,s+=2),i=0,a=s);for(const c of e[u]){const u=Q(c);if(i+u[t?"height":"width"]>10&&(s=a,i=0),s+u[t?"width":"height"]>10){if(!n)return X(e,t,!0);l()}o.set(c,{page:r,rows:[t?i:s],cols:[t?s:i]}),i+=u[t?"height":"width"],a=Math.max(a,s+u[t?"width":"height"])}!n&&0===u&&e.length>2&&(n=a>3)}return{nbPages:r+1,positions:o}}function Z(e){return Number(e.code.slice(1))}function ee(e,t){switch(e){case"single-line":return function(e){const t=new Map;let n=0;for(const o of e)for(const e of o){const o=Q(e);if(n+o.width>10)throw new Error(`Single-line layout ran out of space for ${e.name}`);t.set(e,{page:0,rows:V,cols:[n]}),n+=o.width}return{nbPages:Math.sign(e.length),positions:t}}(t);case"single-column":return function(e){const t=new Map;let n=0;for(const o of e)for(const e of o){const o=Q(e);if(n+o.height>10)throw new Error(`Single-column layout ran out of space for ${e.name}`);t.set(e,{page:0,rows:[n],cols:K}),n+=o.height}return{nbPages:Math.sign(e.length),positions:t}}(t);case"set":return function([e]){const t=new Map;for(const n of e){const{type:e}=Q(n);switch(e){case"ring":t.set(n,{page:0,rows:[6],cols:[3,6]});break;case"amul":t.set(n,{page:0,rows:[2],cols:[6]});break;case"tors":t.set(n,{page:0,rows:[3],cols:[4]});break;case"helm":case"circ":case"phlm":case"pelt":t.set(n,{page:0,rows:[0],cols:[4]});break;case"glov":t.set(n,{page:0,rows:[7],cols:[1]});break;case"belt":t.set(n,{page:0,rows:[7],cols:[4]});break;case"boot":t.set(n,{page:0,rows:[7],cols:[7]});break;case"shie":case"head":case"ashd":t.set(n,{page:0,rows:[2],cols:[7]});break;default:if("7wd"===n.code){t.set(n,{page:0,rows:[2],cols:[7]});break}t.set(n,{page:0,rows:[2],cols:[1]})}}return{nbPages:1,positions:t}}(t);case"runes":return function([e]){const t=new Map;e.sort(((e,t)=>Z(e)-Z(t)));const n=[];let o=0;for(let t=1;t<34;t++){const r=[];for(;o<e.length&&Z(e[o])===t;)r.push(e[o]),o++;n.push(r)}let r=0,s=-2,i=0;function a(e,n){for(const o of e){if(i+1>10&&(s++,i=0),s+1>10&&(r++,s=0,i=0,!n))return a(e,!0);t.set(o,{page:r,rows:[s],cols:[i]}),i++}}for(const e of n)s+=2,i=0,a(e,0===s);return{nbPages:r+1,positions:t}}(t);case"tier-lines":return X(t,!1);case"tier-columns":return X(t,!0);default:return function(e){const t=new Map;if(0===e.length)return{nbPages:0,positions:t};let n=0,o=0,r=0,s=0;function i(e,a){for(const l of e){const c=Q(l);if(r+c.width>10&&(o=s,r=0),o+c.height>10&&(n++,o=0,r=0,s=0,!a))return i(e,!0);t.set(l,{page:n,rows:[o],cols:[r]}),r+=c.width,s=Math.max(s,o+c.height)}}for(const t of e)o=s,r=0,i(t,0===o);return{nbPages:n+1,positions:t}}(t)}}function te(e){const t=function(e){return e.reduce(((e,t)=>e+oe(t,8)),"")}(e);let n=0;const o={raw:t,read:(e,o=n)=>(n=o+e,t.slice(o,o+e)),readInt:(e,t=n)=>ne(o.read(e,t)),readBool:(e=n)=>"1"===o.read(1,e),remainingBits:()=>t.length-n};return o}function ne(e){return parseInt(e.split("").reverse().join(""),2)}function oe(e,t){return e.toString(2).padStart(t,"0").split("").reverse().join("")}function re(e){const t=[];for(let n=0;n<e.length/8;n++)t.push(ne(e.slice(8*n,8*(n+1))));return t}function se(e,t,n,o,r){for(const n of e.pages){const e=n.items.indexOf(t);if(e>=0){n.items.splice(e,1);break}}if(!e.pages[n])throw new Error("Cannot move an item to a page that has not bee created yet");const s={...t,row:o,column:r},i=e.pages[n].items.find((e=>function(e,t){const{width:n,height:o}=Q(e),{width:r,height:s}=Q(t);return e.row+o>t.row&&t.row+s>e.row&&e.column+n>t.column&&t.column+r>e.column}(s,e)));if(i)throw new Error(`Trying to move ${t.name} to the same spot as ${i.name}`);e.pages[n].items.push(t),t.row=o,t.column=r,t.raw=t.raw.slice(0,65)+oe(r,4)+oe(o,4)+t.raw.slice(73)}function ie(e,t){void 0!==e.flags&&(e.flags+=2,t&&(e.flags+=4))}function ae(e,t,n=!1){return e.sort(((e,o)=>(n?-1:1)*(t(e)-t(o)))).reduce(((e,n)=>{let o=e[e.length-1];return o&&t(o[0])===t(n)||(o=[],e.push(o)),o.push(n),e}),[])}function le(e,t){const n={name:`# ${t}`,items:[],flags:e.personal?0:1};return e.pages.push(n),n}const ce=["tes","ceh","bet","fed","toa"];function ue(e,t){if(0===t.length)return;const n=ae(t,(e=>ce.indexOf(e.code))),o=e.pages.length,{nbPages:r,positions:s}=ee("lines",n);for(let t=0;t<r;t++){const n=le(e,"Respecs");0===t&&ie(n,!1)}for(const[t,{page:n,rows:r,cols:i}]of s.entries())se(e,t,o+n,r[0],i[0])}const de=["pk1","pk2","pk3","dhn","bey","mbr","std"];function fe(e,t){if(0===t.length)return;const n=ae(t,(e=>de.indexOf(e.code))),o=e.pages.length,{nbPages:r,positions:s}=ee("lines",n);for(let t=0;t<r;t++){const n=le(e,"Ubers");0===t&&ie(n,!1)}for(const[t,{page:n,rows:r,cols:i}]of s.entries())se(e,t,o+n,r[0],i[0])}class he extends Error{constructor(e,t){let n=e.name;if(!n)try{n=Q(e).name}catch(t){n=`item with code ${e.code}`}n+=` at row ${e.row}, column ${e.column}`;let o=`Failed to parse ${n}`;t&&(o+=`: ${t}`),super(o),this.name="ItemParsingError"}}const pe=["item_armor_percent","armorclass","item_armor_perlevel","item_armorpercent_perlevel"];function me({readInt:e},t){const n=[];let o=e(9);for(;511!==o;){const r=c[o];if(!r)throw new he(t,`Unknown mod ${o}`);let s={id:o,stat:r.stat,priority:r.descPriority};if(3===r.encode)s={...s,level:e(6)-r.bias,spell:e(10)-r.bias,charges:e(8)-r.bias,maxCharges:e(8)-r.bias};else if(2===r.encode)s={...s,level:e(6)-r.bias,spell:e(10)-r.bias,chance:e(r.size)-r.bias};else{let t;r.paramSize&&(t=e(r.paramSize)-r.bias),s={...s,value:e(r.size)-r.bias,param:t}}n.push(s),pe.includes(s.stat)&&(t.enhancedDefense=!0),"maxdurability"===r.stat&&(t.extraDurability=s.value),o=r.followedBy?r.followedBy:e(9)}return n}function ve(n){const c=te(n),u=function({raw:e,readBool:t,readInt:n}){const o={raw:e,identified:t(20),socketed:t(27),simple:t(37),ethereal:t(38),personalized:t(40),runeword:t(42),location:n(3,58),stored:n(3,73),column:n(4,65),row:n(4,69),code:String.fromCharCode(n(8,76),n(8),n(8),n(8)).trim(),search:""};return o.socketed&&n(3,108)&&(o.filledSockets=[]),(ce.includes(o.code)||de.includes(o.code))&&(o.simple=!0),o.simple&&(o.name=Q(o).name),o}(c);if(!u.simple){if(c.remainingBits()<32)return!1;try{!function({read:e,readBool:t,readInt:n},c){var u;switch(c.id=n(32,111),c.level=n(7),c.quality=n(4),t()&&(c.picture=n(3)),t()&&(c.classSpecificAffix=n(11)),c.quality){case 2:c.name=Q(c).name;break;case 1:c.qualityModifier=n(3),c.name=`Low Quality ${Q(c).name}`;break;case 3:c.qualityModifier=n(3),c.name=`Superior ${Q(c).name}`;break;case 4:c.prefixes=[n(11)],c.suffixes=[n(11)],c.name=Q(c).name,c.prefixes[0]&&(c.name=`${i[c.prefixes[0]].name} ${c.name}`),c.suffixes[0]&&(c.name=`${c.name} ${a[c.suffixes[0]].name}`);break;case 5:c.unique=n(12),c.name=s[c.unique].name;break;case 7:c.unique=n(12),c.name=r[c.unique].name;break;case 6:case 8:c.name=`${o[n(8)]} ${o[n(8)]}`,c.prefixes=[],c.suffixes=[];for(let e=0;e<6;e++)t()&&(null===(u=c[e%2?"suffixes":"prefixes"])||void 0===u||u.push(n(11)))}if(c.runeword&&(c.runewordId=n(12)-27,2691===c.runewordId&&(c.runewordId=21),c.name=l[c.runewordId].name,e(4)),c.personalized){let e,t="";for(;0!==(e=n(7));)t+=String.fromCharCode(e);c.name=`${t}'s ${c.name}`}e(1)}(c,u),function({read:n,readInt:o},r){const s=e[r.code],i=t[r.code];if(s&&(r.defense=o(11)-10),s||i){const e=o(8);e&&(r.durability=[o(8),e],n(1))}(null==i?void 0:i.stackable)&&(r.quantity=o(9)),r.socketed&&(r.sockets=o(4))}(c,u),(u.quality>2||u.runeword)&&function(e,t){t.modifiers=[];const n=5===t.quality?e.read(5):void 0;if(t.runeword&&t.modifiers.push(...me(e,t)),t.modifiers.push(...me(e,t)),n){t.setItemModifiers=[];for(let o=0;o<n.length;o++)"1"===n[o]?t.setItemModifiers.push(me(e,t)):t.setItemModifiers.push([])}}(c,u)}catch(e){if(e instanceof he)throw e;throw new he(u,e.message)}}return u}function _e(e){const t=e.readString(2);if("ST"!==t)throw new Error(`Unexpected header ${t} for a stash page`);e.peek=!0,e.readNullTerminatedString(),e.read(1);const n="JM"!==e.readString(2);let o;e.peek=!1,n&&(o=e.readInt8(),e.read(3));const r={flags:o,name:e.readNullTerminatedString(),items:[]};function s(){e.peek=!0;const t=e.done||"ST"===e.readString(2);return e.peek=!1,t}for(e.read(4);!s();){const t=[];let n=!1;for(;!n;)t.push(...e.readUntil(["JM","ST"],2)),n=ve(Uint8Array.from(t));if(6===n.location){const e=r.items[r.items.length-1];if(!e.filledSockets)throw new Error("Trying to socket a non-socketed item");e.filledSockets.push(n)}else r.items.push(n)}return r}function ge({prop:e,min:t,max:n,param:o},r,s){var i,a;const{stats:l}=d[e];for(const{stat:c,type:d}of l)if("other"===d||"param"===d&&!o){let l=e=>e.stat===c;if("skill"===e)l=e=>"param"in e&&e.param===o&&e.stat===c;else if("skilltab"===e){const e=null===(i=u[Number(o)])||void 0===i?void 0:i.id;l=t=>"param"in t&&t.param===e&&t.stat===c}const d=null==r?void 0:r.find(l);if(("dmg-min"===e||"dmg-max"===e)&&void 0===d)continue;d&&(d.range=[t,n]),s(null!==(a=null==d?void 0:d.value)&&void 0!==a?a:0,t,n)}else if("all"===d){const e=null==r?void 0:r.find((e=>e.stat===c));e&&(e.range=[t,n])}}const be=["sock"];function we(e){const t=[];for(const{prop:n,min:o,max:r,param:s}of e){if(be.includes(n))continue;const{stats:e}=d[n];for(const{stat:i,type:a,param:l}of e){const e=c.findIndex((e=>(null==e?void 0:e.stat)===i));if(e<0)throw new Error(`Unknown mod ${i}`);const d=t[t.length-1],f={id:e,stat:i,priority:c[e].descPriority};switch(a){case"proc":t.push({...f,level:r,spell:Number(s),chance:o});break;case"charges":t.push({...f,level:r,spell:Number(s),charges:o,maxCharges:o});break;case"all":if(!("value"in d))throw new Error("No previous mod to copy");t.push({...f,value:d.value,param:d.param});break;case"min":t.push({...f,value:o});break;case"max":t.push({...f,value:r});break;case"param":t.push({...f,value:Number(s)});break;case"other":if(o!==r)throw new Error(`Unexpected range modifier ${n}: ${o}-${r}`);t.push({...f,value:r,param:s?"item_addskill_tab"===i?u[Number(s)].id:s:l})}}}return t}function ye(t,n){if(t.modifiers||(t.modifiers=[]),"jew"===n.code)t.modifiers.push(...n.modifiers);else{const o=f[n.code];if(!o)throw new he(t,"Only gems, runes and jewels can be put in sockets");const r=e[t.code];let s;s=r?"shie"===r.type||"head"===r.type||"ashd"===r.type?o.shield:o.armor:o.weapon,t.modifiers.push(...we(s))}}function ke(e,t){return e.id===t.id&&"value"in e&&e.param===t.param}function xe(e,t=c[e.id]){var n,o,r,s,i,a;if(!t)return;let l=e.value;t.stat.endsWith("perlevel")&&(t.stat.includes("tohit")?l/=2:l/=8,l=Math.floor(99*l));let d,f,m,v=(null!=l?l:0)<0?t.descNeg:t.descPos;switch(t.descFunc){case 1:case 6:case 12:d=(null!=l?l:0)<0?`${l}`:`+${l}`;break;case 2:case 7:d=`${l}%`;break;case 3:case 9:d=`${l}`;break;case 4:case 8:d=(null!=l?l:0)<0?`${l}%`:`+${l}%`;break;case 5:d=`${Math.floor(100*l/128)}%`;break;case 11:v=v.replace("%d",""+100/l);break;case 13:v=p[e.param].skillsMod,d=`+${l}`;break;case 14:if(m=u.find((({id:t})=>t===e.param)),!m)throw new Error(`Unknown skill tab ${m}`);v=`+${l} to ${m.name} ${p[m.charClass].classOnly}`;break;case 15:v=v.replace("%d%",`${e.chance}`).replace("%d",`${e.level}`).replace("%s",`${h[e.spell].name}`);break;case 16:v=v.replace("%d",`${l}`).replace("%s",`${h[e.param].name}`);break;case 19:v=v.replace("%d",`${l}`);break;case 20:d=-l+"%";break;case 22:case 23:d=`${l}%`;break;case 24:v=`Level ${e.level} ${h[e.spell].name} ${v.replace("%d",`${e.charges}`).replace("%d",`${e.maxCharges}`)}`;break;case 27:f=h[e.param],v=`+${l} to ${f.name} ${p[f.charClass].classOnly}`;break;case 28:v=`+${l} to ${h[e.param].name}`;break;case 100:(null===(n=e.values)||void 0===n?void 0:n[0])!==(null===(o=e.values)||void 0===o?void 0:o[1])&&(v=t.descNeg),v=v.replace("%d",`${null===(r=e.values)||void 0===r?void 0:r[0]}`).replace("%d",`${null===(s=e.values)||void 0===s?void 0:s[1]}`);break;case 101:v=(null===(i=e.values)||void 0===i?void 0:i[0])===(null===(a=e.values)||void 0===a?void 0:a[1])?v.replace("%d",`${Math.round(e.values[0]*e.values[2]/256)}`).replace("%d",`${Math.round(e.values[2]/25)}`):t.descNeg.replace("%d",`${Math.round(e.values[0]*e.values[2]/256)}`).replace("%d",`${Math.round(e.values[1]*e.values[2]/256)}`).replace("%d",`${Math.round(e.values[2]/25)}`)}if(v){let e="";switch(t.descVal){case 1:e=`${d} ${v}`;break;case 2:e=`${v} ${d}`;break;default:e=v}return 6<=t.descFunc&&t.descFunc<=9&&(e+=` ${t.descAdditional}`),e}}function Se(e,t){var n,o,r;const s=null!==(n=null==t?void 0:t.filter((({id:t})=>e.statsInGroup.includes(t))))&&void 0!==n?n:[];if(s.length!==e.statsInGroup.length)return!1;if(e.allEqual&&s.some((({value:e})=>e!==s[0].value)))return!1;if(e.isRange&&(null!==(o=s[0].value)&&void 0!==o?o:0)>(null!==(r=s[1].value)&&void 0!==r?r:0))return!1;if(("group:secondary-dmg"===e.stat||"group:min-dmg"===e.stat||"group:max-dmg"===e.stat)&&(null==t?void 0:t.find((e=>"group:primary-dmg"===e.stat)))){for(const e of s)delete e.description;return!1}const i={id:-1,stat:e.stat,priority:e.descPriority,value:e.allEqual?s[0].value:void 0,values:s.map((({value:e})=>null!=e?e:0))};i.description=xe(i,e),e.allEqual&&(i.range=s[0].range),null==t||t.push(i);for(const e of s)delete e.description;return!0}function Oe(e,t,n=""){for(const e of t)e.description=xe(e),e.description&&n&&(e.description+=n);!function(e){for(const t of m)Se(t,e)}(t),t.sort((({priority:e,param:t},{priority:n,param:o})=>n-e||(null!=o?o:0)-(null!=t?t:0)));for(const{description:n}of t)n&&(e.search+=`${n}\n`)}function $e(e){var t,n;if((e.runeword||7===e.quality||5===e.quality)&&function(e){var t;if(!e.modifiers)return 0;let n;if(e.runeword)n=l[e.runewordId].modifiers;else if(7===e.quality)n=r[e.unique].modifiers;else{if(5!==e.quality)throw new Error("Only uniques, sets and runewords have a perfection score.");n=[...s[e.unique].baseModifiers,...s[e.unique].setModifiers.flat()]}n=n.filter((({prop:e})=>"bloody"!==e));const o=Q(e);let i=0,a=0;function c(e,t,n){t!==n&&(i=(a*i+(e-t)/(n-t))/++a)}for(const t of n)t.min!==t.max&&("sock"!==t.prop?ge(t,e.modifiers,c):(e.socketsRange=[t.min,Math.min(t.max,o.maxSockets)],c(e.sockets,...e.socketsRange)));if((7===e.quality||5===e.quality)&&"def"in o&&!n.some((({prop:e})=>"ac%"===e))){const n=null!==(t=e.defense)&&void 0!==t?t:0,r=e.ethereal?1.5:1;e.defenseRange=[Math.floor(o.def[0]*r),Math.floor(o.def[1]*r)],c(n,...e.defenseRange)}e.perfectionScore=0===a?100:Math.floor(100*i)}(e),e.filledSockets)for(const t of e.filledSockets)ye(e,t);e.modifiers&&(!function(e){var t,n,o,r,s,i,a,l,c,u,d,f,h,p;for(const m of e){let v;for(;(v=e.findIndex((e=>m!==e&&ke(m,e))))>=0;){const[_]=e.splice(v,1);m.value=(null!==(t=m.value)&&void 0!==t?t:0)+(null!==(n=_.value)&&void 0!==n?n:0),(m.range||_.range)&&(m.range=[(null!==(s=null!==(r=null===(o=m.range)||void 0===o?void 0:o[0])&&void 0!==r?r:m.value)&&void 0!==s?s:0)+(null!==(l=null!==(a=null===(i=_.range)||void 0===i?void 0:i[0])&&void 0!==a?a:_.value)&&void 0!==l?l:0),(null!==(d=null!==(u=null===(c=m.range)||void 0===c?void 0:c[1])&&void 0!==u?u:m.value)&&void 0!==d?d:0)+(null!==(p=null!==(h=null===(f=_.range)||void 0===f?void 0:f[1])&&void 0!==h?h:_.value)&&void 0!==p?p:0)])}}}(e.modifiers),Oe(e,e.modifiers)),5===e.quality&&(null===(t=e.setItemModifiers)||void 0===t||t.forEach(((t,n)=>{Oe(e,t,` (${n+2} items)`)})),function(e){const t=5===e.quality&&v[s[e.unique].set];t&&(e.setGlobalModifiers=t.modifiers.map((e=>we(e))))}(e),null===(n=e.setGlobalModifiers)||void 0===n||n.forEach(((t,n)=>{Oe(e,t,n>=4?"":` (${n+2} items)`)}))),e.ethereal&&(e.search+="Ethereal"),e.sockets&&(e.search+=`Socketed (${e.sockets})`),e.search=e.search.toLowerCase()}class qe{constructor(e){this.raw=e,this.peek=!1,this.nextIndex=0}moveTo(e){this.peek||(this.nextIndex=e)}get done(){return this.nextIndex>=this.raw.length}read(e,t=this.nextIndex){return this.moveTo(t+e),this.raw.slice(t,t+e)}readString(e,t=this.nextIndex){return String.fromCharCode(...this.read(e,t))}readUntil(e,t=0,n=this.nextIndex){let o=function(e,t,n=0){const o=[];for(const e of t){if(2!==e.length)throw new Error("indexOf was written for exactly 2-char strings");o.push([e.charCodeAt(0),e.charCodeAt(1)])}for(let t=n;t<e.byteLength-1;t++)for(const[n,r]of o)if(e[t]===n&&e[t+1]===r)return t;return-1}(this.raw,e,n+t);return o<0&&(o=this.raw.length),this.moveTo(o),this.raw.slice(n,o)}readNullTerminatedString(e=this.nextIndex){const t=[];for(;this.raw[e++]>0;)t.push(this.raw[e]);return this.moveTo(e),String.fromCharCode(...t)}readInt8(e=this.nextIndex){return this.moveTo(this.nextIndex+1),this.raw[e]}readInt32LE(e=this.nextIndex){return this.moveTo(this.nextIndex+4),this.raw[e]|this.raw[e+1]<<8|this.raw[e+2]<<16|this.raw[e+3]<<24}}function je(e){var t;const n=new qe(e),o=n.readString(4);if("SSS\0"!==o&&"CSTM"!==o)throw new Error("This does not look like a plugy stash file (.sss or .d2x)");const r={personal:"CSTM"===o,pageFlags:!0,gold:0,pages:[]};let s=10;const i=n.readString(2);if("01"===i)r.personal&&(s+=4);else{if("02"!==i)throw new Error("Your version of PlugY is too old.");r.gold=n.readInt32LE(),s+=4}for(n.read(0,s);!n.done;)try{r.pages.push(_e(n))}catch(e){if("message"in e)throw new Error(`${e.message} on page ${r.pages.length+1}`)}return r.pageFlags=void 0!==(null===(t=r.pages[0])||void 0===t?void 0:t.flags),function(e){for(const{items:t}of e.pages)for(const e of t)$e(e)}(r),r}function Ne(e,t,n){for(let o=0;o<t.length;o++)e[n+o]=t.charCodeAt(o);return n+t.length}function Pe(e,t,n){return e[n]=255&t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24,n+4}function Ce(e,t,n){return e[n]=255&t,e[n+1]=t>>>8,n+2}function Ee(e){var t;const n=[];let o=0;e.personal?(o=Ne(n,"CSTM",o),o=Ne(n,"01",o),o+=4):(o=Ne(n,"SSS\0",o),o=Ne(n,"02",o),o=Pe(n,e.gold,o)),o=Pe(n,e.pages.length,o);for(const r of e.pages){o=Ne(n,"ST",o),e.pageFlags&&(n[o]=r.flags,o+=4),o=Ne(n,r.name,o),o++,o=Ne(n,"JM",o),o=Ce(n,r.items.length,o);for(const e of r.items){o=n.push(...re(e.raw));for(const r of null!==(t=e.filledSockets)&&void 0!==t?t:[])o=n.push(...re(r.raw))}}return Uint8Array.from(n)}window.indexedDB||alert("Your browser doesn't support a stable version of IndexedDB. This application will not remember your stash between sessions.");const Me=new Promise(((e,t)=>{const n=indexedDB.open("D2StashOrganizer");n.onerror=function(){t("Unable to open IndexedDB")},n.onsuccess=function(){e(this.result)},n.onupgradeneeded=function(){const e=this.result.createObjectStore("stash"),t=localStorage.getItem("stash");t&&(e.transaction.oncomplete=()=>{this.result.transaction("stash","readwrite").objectStore("stash").put(He(JSON.parse(t)),0)})}}));function Ie(e){return Me.then((t=>new Promise(((n,o)=>{const r=t.transaction("stash","readwrite").objectStore("stash").put(e,0);r.onerror=function(){o("Unable to save stash.")},r.onsuccess=function(){n()}}))))}async function Te(e){try{const t=je(new Uint8Array(await e.arrayBuffer()));return t.filename=e.name,t}catch(e){throw"message"in e&&alert(e.message),e}}function He(e){return new File([new Blob([Ee(e).buffer])],e.filename||(e.personal?"CharacterName.d2x":"_LOD_SharedStashSave.sss"))}async function Le(){const e=await Me.then((e=>new Promise(((t,n)=>{const o=e.transaction("stash","readonly").objectStore("stash").get(0);o.onerror=function(){n("Unable to read stash.")},o.onsuccess=function(){t(this.result)}}))));if(e)return Te(e)}var Ae,Ue,De,Be=0,Re=[],ze=_.__b,Fe=_.__r,We=_.diffed,Ge=_.__c,Je=_.unmount;function Ye(e,t){_.__h&&_.__h(Ue,e,Be||t),Be=0;var n=Ue.__H||(Ue.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function Qe(e){return Be=1,function(e,t,n){var o=Ye(Ae++,2);return o.t=e,o.__c||(o.__=[n?n(t):st(void 0,t),function(e){var t=o.t(o.__[0],e);o.__[0]!==t&&(o.__=[t,o.__[1]],o.__c.setState({}))}],o.__c=Ue),o.__}(st,e)}function Ve(e,t){var n=Ye(Ae++,3);!_.__s&&rt(n.__H,t)&&(n.__=e,n.__H=t,Ue.__H.__h.push(n))}function Ke(e,t){var n=Ye(Ae++,7);return rt(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function Xe(e,t){return Be=8,Ke((function(){return e}),t)}function Ze(e){var t=Ue.context[e.__c],n=Ye(Ae++,9);return n.__c=e,t?(null==n.__&&(n.__=!0,t.sub(Ue)),t.props.value):e.__}function et(){Re.forEach((function(e){if(e.__P)try{e.__H.__h.forEach(nt),e.__H.__h.forEach(ot),e.__H.__h=[]}catch(t){e.__H.__h=[],_.__e(t,e.__v)}})),Re=[]}_.__b=function(e){Ue=null,ze&&ze(e)},_.__r=function(e){Fe&&Fe(e),Ae=0;var t=(Ue=e.__c).__H;t&&(t.__h.forEach(nt),t.__h.forEach(ot),t.__h=[])},_.diffed=function(e){We&&We(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(1!==Re.push(t)&&De===_.requestAnimationFrame||((De=_.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(o),tt&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,100);tt&&(t=requestAnimationFrame(n))})(et)),Ue=void 0},_.__c=function(e,t){t.some((function(e){try{e.__h.forEach(nt),e.__h=e.__h.filter((function(e){return!e.__||ot(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],_.__e(n,e.__v)}})),Ge&&Ge(e,t)},_.unmount=function(e){Je&&Je(e);var t=e.__c;if(t&&t.__H)try{t.__H.__.forEach(nt)}catch(e){_.__e(e,t.__v)}};var tt="function"==typeof requestAnimationFrame;function nt(e){var t=Ue;"function"==typeof e.__c&&e.__c(),Ue=t}function ot(e){var t=Ue;e.__c=e.__(),Ue=t}function rt(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function st(e,t){return"function"==typeof t?t(e):t}J("#filepicker{display:inline-block;vertical-align:text-bottom;margin-left:1em;margin-top:-1em}");const it=function(e,t){var n={__c:t="__cC"+y++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,o;return this.getChildContext||(n=[],(o={})[t]=this,this.getChildContext=function(){return o},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some(E)},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}({stash:void 0,setStash:()=>{}});function at({children:e}){const[t,n]=Qe(void 0),o=Ke((()=>({stash:t,setStash:n})),[t]);return Ve((()=>{Le().then((e=>n(e))).catch((()=>{}))}),[]),G(it.Provider,Object.assign({value:o},{children:e}),void 0)}function lt(){const{stash:e,setStash:t}=Ze(it),n=function(e){return Be=5,Ke((function(){return{current:e}}),[])}(null),o=Xe((async({currentTarget:e})=>{var n;const o=null===(n=e.files)||void 0===n?void 0:n[0];if(o){await Ie(o);const n=await Te(o);t(n),e.value=""}}),[t]);return G("span",Object.assign({id:"filepicker"},{children:[G("button",Object.assign({class:"button",onClick:()=>n.current.click()},{children:[e?"Update":"Upload"," my stash"]}),void 0),G("input",{class:"hidden",ref:n,type:"file",accept:".sss,.d2x",onChange:o},void 0)]}),void 0)}function ct(e){if(e.quality&&void 0!==e.unique)switch(e.quality){case 7:return r[e.unique];case 5:return s[e.unique];default:return}}const ut=[[{name:"Rings",shortName:"rings",types:["ring"],layout:"single-line"},{name:"Amulets",shortName:"amulets",types:["amul"]},{name:"Charms",shortName:"charms",types:["scha","mcha","lcha"],layout:"single-column"},{name:"Jewels",shortName:"jewels",types:["jewl"],layout:"single-line"}],[{name:"Armor",shortName:"armor",types:["tors"]},{name:"Helms",shortName:"helms",types:["helm","circ"]},{name:"Gloves",shortName:"gloves",types:["glov"]},{name:"Belts",shortName:"belts",types:["belt"],layout:"tier-columns"},{name:"Boots",shortName:"boots",types:["boot"]},{name:"Shields",shortName:"shields",types:["shie"]}],[{name:"One-hand axes",shortName:"axes",types:["axe"],twoHanded:!1},{name:"Two-hand axes",shortName:"axes",types:["axe"],twoHanded:!0},{name:"Bows",shortName:"bows",types:["bow"]},{name:"Crossbows",shortName:"crossbows",types:["xbow"]},{name:"Daggers",shortName:"daggers",types:["knif"]},{name:"One-hand maces",shortName:"maces",types:["club","mace","hamm","scep"],twoHanded:!1},{name:"Two-hand maces",shortName:"maces",types:["club","mace","hamm","scep"],twoHanded:!0},{name:"Polearms",shortName:"polearms",types:["pole"]},{name:"Spears",shortName:"spears",types:["spea"]},{name:"Staves",shortName:"staves",types:["staf"]},{name:"One-hand swords",shortName:"swords",types:["swor"],twoHanded:!1},{name:"Two-hand swords",shortName:"swords",types:["swor"],twoHanded:!0},{name:"Throwing",shortName:"throwing",types:["taxe","tkni","jave"]},{name:"Wands",shortName:"wands",types:["wand"]}],[{name:"Amazon",shortName:"Amazon",types:["ajav","abow","aspe"]},{name:"Assassin",shortName:"Assassin",types:["h2h","h2h2"]},{name:"Barbarian",shortName:"Barbarian",types:["phlm"]},{name:"Druid",shortName:"Druid",types:["pelt"]},{name:"Necromancer",shortName:"Necro",types:["head"]},{name:"Paladin",shortName:"Paladin",types:["ashd"]},{name:"Sorceress",shortName:"Sorceress",types:["orb"]}]],dt=[],ft=new Map;for(const e of ut)for(const t of e){dt.push(...t.types);for(const e of t.types)void 0===t.twoHanded?ft.set(e,t):ft.set(`${e}-${Number(t.twoHanded)}`,t)}function ht(e,t){const n=new Map;for(const e of ut)for(const t of e)n.set(t,[]);for(const o of e){const e=Q(o),r=ft.get(e.type)||"twoHanded"in e&&ft.get(`${e.type}-${Number(e.twoHanded)}`);if(!r)continue;const s=n.get(r),i=t?e.tier:0;let a=s[i];a||(a=[],s[i]=a),a.push(o)}for(const[e,t]of n)n.set(e,t.filter((({length:e})=>e>0)));return n}function pt(e){return"enabled"in e||(e=ct(e)),!!e&&(!Q(e).indestructible&&e.modifiers.every((({prop:e})=>"indestruct"!==e&&"ethereal"!==e)))}function mt(e=!1){let t=r.filter((e=>e.enabled&&e.qlevel>0));e&&(t=t.filter(pt));const n=ht(t,!0);for(const e of n.values())for(const t of e)t.sort(((e,t)=>e.qlevel-t.qlevel));return n}const vt=[[{name:"Low level sets",maxLevel:20}],[{name:"Mid level sets",maxLevel:60}],[{name:"High level sets",maxLevel:100}]],_t=[],gt=Object.entries(v);let bt=0;for(const[{maxLevel:e}]of vt)_t.push(gt.filter((([,{levelReq:t}])=>bt<=t&&t<e)).sort((([,e],[,t])=>e.levelReq-t.levelReq)).map((([e,{name:t}])=>{const n=t.lastIndexOf("'");n>=0&&!t.startsWith("Death")&&!t.startsWith("Heaven")&&!t.startsWith("Orphan")&&(t=t.slice(0,n));let o=t,r=t.indexOf("'",4);return r<0&&(r=t.indexOf(" ",4)),r>0&&(o=t.slice(0,r)),o.startsWith("The ")&&(o=o.slice(4)),{name:t,shortName:o,set:e}}))),bt=e;function wt(e){const t=new Map;for(const e of _t)for(const{set:n}of e)t.set(v[n],[]);for(const n of e){const e="set"in n?n:s[n.unique];t.get(v[e.set]).push(n)}return t}function yt(e,t=!1,n=0,o=e.pages.length){const r=[];for(const{items:s}of e.pages.slice(n,o))if(r.push(...s),t)for(const e of s)e.filledSockets&&r.push(...e.filledSockets);return r}function kt(e){const t=new Map;for(const n of yt(e,!0)){const e=ct(n);if(!e)continue;let o=t.get(e);o||(o=[],t.set(e,o)),o.push(n)}const n=new Map;for(const[e,o]of mt())n.set(e,o.map((e=>e.map((e=>{var n,o;return{item:e,normal:!!t.get(e),ethereal:pt(e)?!!(null===(n=t.get(e))||void 0===n?void 0:n.some((({ethereal:e})=>e))):void 0,perfect:!!(null===(o=t.get(e))||void 0===o?void 0:o.some((({perfectionScore:e})=>100===e)))}})))));for(const[e,o]of wt(s))n.set(e,[o.map((e=>{var n;return{item:e,normal:!!t.get(e),ethereal:void 0,perfect:!!(null===(n=t.get(e))||void 0===n?void 0:n.some((({perfectionScore:e})=>100===e)))}}))]);return n}function xt(){const{stash:e}=Ze(it),{nbNormal:t,totalNormal:n,nbEth:o,totalEth:r,nbPerfect:s}=Ke((()=>function(e){const t={nbNormal:0,totalNormal:0,nbEth:0,totalEth:0,nbPerfect:0};if(!e)return t;for(const n of kt(e).values())for(const e of n)for(const{normal:n,ethereal:o,perfect:r}of e)t.totalNormal++,n&&t.nbNormal++,r&&t.nbPerfect++,void 0!==o&&(t.totalEth++,o&&t.nbEth++);return t}(e)),[e]);return G("div",{children:[G("p",{children:["Normal Grail: ",t," / ",n]},void 0),G("p",{children:["Eth Grail: ",o," / ",r]},void 0),G("p",{children:["Perfect Grail: ",s," / ",n]},void 0)]},void 0)}J('.found{color:#6fb76f}.found:after{content:" ✔"}.missing{color:#ff6f6f}.missing:after{content:" ✘"}#grail-tracker{margin-top:1em}#grail-tracker th{text-align:left}#grail-tracker td{padding:0 1em}#grail-tracker td[colspan]{text-align:center;padding-top:1em}');const St=["Normal","Exceptional","Elite"],Ot=e=>e?"found":"missing";function $t(){const{stash:e}=Ze(it),[t,n]=Qe("all"),o=Ke((()=>e&&kt(e)),[e]);if(!o)return null;const r=[];for(const[e,n]of o)n.forEach(((o,s)=>{const i=[];for(const{item:e,normal:n,ethereal:r,perfect:s}of o)n&&"missing"===t||s&&"perfect"===t||(void 0===r||r)&&"ethereal"===t||i.push(G("tr",{children:[G("th",Object.assign({scope:"row",class:"set"in e?"set":"unique"},{children:e.name}),void 0),G("td",Object.assign({class:Ot(n)},{children:"Normal"}),void 0),G("td",void 0===r?{children:G("span",{"aria-label":"Not applicable"},void 0)}:Object.assign({class:Ot(r)},{children:"Ethereal"}),void 0),G("td",Object.assign({class:Ot(s)},{children:"Perfect"}),void 0)]},void 0));if(0===i.length)return;const a=n.length>1?`${St[s]} ${e.name}`:e.name;r.push(G("tbody",{children:[G("tr",{children:G("td",Object.assign({colSpan:4},{children:a}),void 0)},void 0),i]},void 0))}));return G(j,{children:[G("div",Object.assign({class:"controls"},{children:[G(xt,{},void 0),G("div",{children:[G("p",{children:G("label",Object.assign({for:"grail-filter"},{children:"Show:"}),void 0)},void 0),G("p",{children:G("select",Object.assign({id:"grail-filter",value:t,onChange:({currentTarget:e})=>n(e.value)},{children:[G("option",Object.assign({value:"all"},{children:"All items"}),void 0),G("option",Object.assign({value:"missing"},{children:"Missing items"}),void 0),G("option",Object.assign({value:"ethereal"},{children:"Missing ethereal items"}),void 0),G("option",Object.assign({value:"perfect"},{children:"Missing perfect items"}),void 0)]}),void 0)},void 0)]},void 0)]}),void 0),G("table",Object.assign({id:"grail-tracker"},{children:r}),void 0)]},void 0)}J(".pagination{display:flex;flex-flow:row nowrap;justify-content:space-between;margin:2em 0}.pagination button:first-child{margin-right:1em}.pagination button[disabled]{opacity:0;cursor:default}");function qt({nbPages:e,currentPage:t,setPage:n}){const o=10*Math.floor((e-1)/10);return G("div",Object.assign({class:"pagination"},{children:[G("div",Object.assign({style:{visibility:0===t?"hidden":"visible"}},{children:[G("button",Object.assign({class:"button",onClick:()=>n(0)},{children:"First"}),void 0),G("button",Object.assign({class:"button",onClick:()=>n((e=>e-10))},{children:"Previous"}),void 0)]}),void 0),G("span",{children:["Pages ",t+1," - ",Math.min(t+10,e)," ","out of ",e]},void 0),G("div",Object.assign({style:{visibility:t>=o?"hidden":"visible"}},{children:[G("button",Object.assign({class:"button",onClick:()=>n((e=>e+10))},{children:"Next"}),void 0),G("button",Object.assign({class:"button",onClick:()=>n(o)},{children:"Last"}),void 0)]}),void 0)]}),void 0)}function jt(e){return e.simple||ce.includes(e.code)||de.includes(e.code)}function Nt({item:e,quantity:t}){var n;const o=[];return jt(e)&&o.push(`Quantity: ${t}`),(e.runeword||7===e.quality||5===e.quality)&&(100===e.perfectionScore?o.push("Perfect"):o.push(`${e.perfectionScore}% perfect`)),e.ethereal&&o.push("Ethereal"),e.runeword&&o.push(Q(e).name),(null!==(n=e.quality)&&void 0!==n?n:10)<=3&&!e.runeword&&e.sockets&&o.push(`${e.sockets} sockets`),G(j,{children:o.join(", ")},void 0)}J(".item td,.item th{text-align:left}.item th{width:400px}");J(".tooltip-container{position:relative}.tooltip-trigger{cursor:pointer}.tooltip-content{position:fixed;height:1px;width:1px;bottom:-1px;overflow:hidden;white-space:nowrap;text-align:center}.tooltip-container:focus-within .tooltip-content,.tooltip-container:hover .tooltip-content{position:absolute;height:auto;width:auto;bottom:calc(100% + .4em);left:0;border:2px solid #fff;padding:.4em .8em;background:rgba(0,0,0,.8)}");let Pt=0;function Ct({range:e}){return e?G("span",Object.assign({class:"sidenote"},{children:[" [",e.join(" - "),"]"]}),void 0):null}function Et({item:e}){var t,n,o,r,s,i;const[a]=Qe((()=>"item-tooltip-"+Pt++)),l=function(e){if(e.runeword)return"unique";switch(e.quality){case 4:return"magic";case 6:return"rare";case 7:return"unique";case 5:return"set";case 8:return"crafted"}return e.sockets||e.ethereal?"socketed":""}(e);if(e.simple)return G("span",Object.assign({class:l},{children:e.name}),void 0);const c=Q(e),u=null!==(n=null===(t=e.modifiers)||void 0===t?void 0:t.map((({description:e,range:t})=>e&&G("div",Object.assign({class:"magic"},{children:[e,G(Ct,{range:t},void 0)]}),void 0))))&&void 0!==n?n:[];if(e.ethereal||e.sockets){const t=[e.ethereal&&"Ethereal",e.sockets&&`Socketed (${e.sockets})`].filter((e=>!!e));null==u||u.push(G("div",Object.assign({class:"magic"},{children:[t.join(", "),G(Ct,{range:e.socketsRange},void 0)]}),void 0))}const d=null===(o=e.setItemModifiers)||void 0===o?void 0:o.flatMap((e=>e.map((({description:e})=>e&&G("div",Object.assign({class:"set"},{children:e}),void 0))))),f=null===(r=e.setGlobalModifiers)||void 0===r?void 0:r.flatMap((e=>e.map((({description:e})=>e&&G("div",Object.assign({class:"unique"},{children:e}),void 0)))));return null==f||f.unshift(G("br",{},void 0)),G("span",Object.assign({class:"tooltip-container"},{children:[G("span",Object.assign({class:`tooltip-trigger ${l}`,tabIndex:0,"aria-describedby":a},{children:e.name}),void 0),G("div",Object.assign({id:a,class:"tooltip-content",role:"tooltip"},{children:[G("div",Object.assign({class:l},{children:e.name}),void 0),G("div",Object.assign({class:l},{children:null==c?void 0:c.name}),void 0),G("div",{children:["Item Level: ",e.level]},void 0),"def"in c&&G("div",{children:["Defense:"," ",G("span",Object.assign({class:e.enhancedDefense?"magic":""},{children:[e.defense,G(Ct,{range:e.defenseRange},void 0)]}),void 0)]},void 0),e.durability&&G("div",{children:["Durability: ",null===(s=e.durability)||void 0===s?void 0:s[0]," of"," ",e.durability[1]+(null!==(i=e.extraDurability)&&void 0!==i?i:0)]},void 0),u,d,f]}),void 0)]}),void 0)}function Mt({item:e,quantity:t}){return G("tr",Object.assign({class:"item"},{children:[G("th",Object.assign({scope:"row"},{children:G(Et,{item:e},void 0)}),void 0),G("td",{children:G(Nt,{item:e,quantity:t},void 0)},void 0)]}),void 0)}J(".page-title{border-bottom:1px solid #666;display:flex;flex-flow:row;justify-content:space-between}.page{width:100%;table-layout:fixed}");function It(e){return e.name||(void 0!==e.flags&&e.flags%2?"Shared Page #":"Personal Page #")}function Tt({page:e,index:t}){var n,o;const r=(null!==(n=e.flags)&&void 0!==n?n:0)>=4?"Main index":(null!==(o=e.flags)&&void 0!==o?o:0)>=2?"Index":"",s=new Map;let i=0;for(const t of e.items)if(jt(t)){let e=s.get(t.code);e||(e={item:t,quantity:0},s.set(t.code,e)),e.quantity++}else s.set(""+i++,{item:t,quantity:1});return G("section",{children:[G("h3",Object.assign({class:"page-title"},{children:[G("span",{children:It(e).replace("#",`${t+1}`)},void 0),G("span",{children:r},void 0)]}),void 0),G("table",Object.assign({class:"page"},{children:Array.from(s.values()).map((({item:e,quantity:t},n)=>{var o;return G(Mt,{item:e,quantity:t},null!==(o=e.id)&&void 0!==o?o:n)}))}),void 0)]},void 0)}J(".controls{display:flex;flex-flow:row nowrap;align-items:stretch;padding:1em 0;border-bottom:1px solid #666}.controls>:not(:last-child){border-right:1px solid #666;padding-right:2em}.controls>:not(:first-child){padding-left:2em}.controls p:first-child{margin-top:0}.controls p:last-child{margin-bottom:0}.controls input,.controls select{width:100%}");const Ht=[1,2,3,4,5,6,7,8,9,10,12,19,20];function Lt(){const{stash:e}=Ze(it),[t,n]=Qe(""),[o,r]=Qe("0"),[s,i]=Qe(0),a=Ke((()=>{let n=null==e?void 0:e.pages;if(t){const o=t.toLocaleLowerCase().split(/"([^"]*)"|\s+/).filter(Boolean);n=null==e?void 0:e.pages.map(((e,t)=>{const n=e.items.filter((t=>{const n=Q(t);return o.every((o=>{var r;return e.name.toLocaleLowerCase().includes(o)||(null===(r=t.name)||void 0===r?void 0:r.toLocaleLowerCase().includes(o))||n.name.toLocaleLowerCase().includes(o)||t.search.includes(o)}))}));return{...e,name:It(e).replace("#",`${t+1}`),items:n}})).filter((({items:e})=>e.length>0))}const r=parseInt(o);return n&&r>0&&(n=n.map((e=>{const t=e.items.filter((e=>e.quality===r||e.simple&&2===r));return{...e,name:It(e),items:t}})).filter((({items:e})=>e.length>0))),n}),[e,t,o]);return Ve((()=>{i(0)}),[e]),Ve((()=>{var e;s>=(null!==(e=null==a?void 0:a.length)&&void 0!==e?e:0)&&i(0)}),[null==a?void 0:a.length,s]),a?G(j,{children:[G("div",Object.assign({class:"controls"},{children:[G("div",Object.assign({id:"search"},{children:[G("p",{children:G("label",Object.assign({for:"search-input"},{children:"Search for an item or a page:"}),void 0)},void 0),G("p",{children:G("input",{id:"search-input",type:"search",value:t,onInput:({currentTarget:e})=>n(e.value)},void 0)},void 0)]}),void 0),G("div",Object.assign({id:"quality"},{children:[G("p",{children:G("label",Object.assign({for:"quality-select"},{children:"Search for a quality:"}),void 0)},void 0),G("p",{children:G("select",Object.assign({id:"quality-select",value:o,onChange:({currentTarget:e})=>r(e.value)},{children:[G("option",Object.assign({value:"0"},{children:"All"}),void 0),G("option",Object.assign({value:"1"},{children:"Low"}),void 0),G("option",Object.assign({value:"2"},{children:"Normal"}),void 0),G("option",Object.assign({value:"3"},{children:"Superior"}),void 0),G("option",Object.assign({value:"4"},{children:"Magic"}),void 0),G("option",Object.assign({value:"5"},{children:"Set"}),void 0),G("option",Object.assign({value:"6"},{children:"Rare"}),void 0),G("option",Object.assign({value:"7"},{children:"Unique"}),void 0),G("option",Object.assign({value:"8"},{children:"Crafted"}),void 0)]}),void 0)},void 0)]}),void 0)]}),void 0),G(qt,{nbPages:a.length,currentPage:s,setPage:i},void 0),G("div",{children:a.slice(s,s+10).map(((e,t)=>G(Tt,{page:e,index:t+s},t)))},void 0),G(qt,{nbPages:a.length,currentPage:s,setPage:i},void 0)]},void 0):null}[...m,...c.filter((e=>!!e))].filter((e=>Ht.includes(e.descFunc)));J("#navigation{display:flex;flex-flow:row nowrap;border-bottom:1px solid #666}.nav-link{color:#aaa;text-decoration:none;margin:0 1em;padding-bottom:.4em}.nav-link.active{color:#fff;border-bottom:1px solid #fff;margin-bottom:-1px}");const At=["unknown","rejuvs","respecs","ubers","gems","runes","runewords","uniques","sets"];function Ut(n){var o;const r=Q(n);return"rpot"===r.type?"rejuvs":ce.includes(n.code)?"respecs":de.includes(n.code)?"ubers":r.type.startsWith("gem")?"gems":"rune"===r.type?"runes":(null!==(o=n.quality)&&void 0!==o?o:10)<=3&&(n.code in e||n.code in t)?"runewords":5===n.quality?"sets":dt.includes(r.type)?"uniques":"unknown"}function Dt(e,t){if(0===t.length)return;const n=e.pages.length,{nbPages:o,positions:r}=ee("lines",[t]);for(let t=0;t<o;t++){const n=le(e,"Unrecognized");0===t&&ie(n,!0)}for(const[t,{page:o,rows:s,cols:i}]of r.entries())se(e,t,n+o,s[0],i[0])}function Bt(e,t){return e.code.localeCompare(t.code)}function Rt(e,t){if(0===t.length)return;t.sort(Bt);const n=e.pages.length,{nbPages:o,positions:r}=ee("lines",[t]);for(let t=0;t<o;t++){const n=le(e,"Rejuvs");0===t&&ie(n,!0)}for(const[t,{page:o,rows:s,cols:i}]of r.entries())se(e,t,n+o,s[0],i[0])}const zt=["gsy","gsv","gsb","gsr","gsg","gsw","sku"],Ft=zt.map((e=>n[e].type)),Wt=zt.map((e=>n[e].name)),Gt=["c","f","u","s","l","z","p"];function Jt(e,t){if(0===t.length)return;const o=zt.map((()=>[]));for(const e of t)o[Ft.indexOf(n[e.code].type)].push(e);const r=o.map(((e,t)=>ae(e,function(e=!1){return t=>Gt.indexOf(t.code.charAt(e?2:1))}(6===t))));let s=e.pages.length;for(let t=0;t<o.length;t++){const{nbPages:n,positions:o}=ee("lines",r[t]);for(let o=0;o<n;o++){const n=le(e,Wt[t]);0===o&&ie(n,0===t)}for(const[t,{page:n,rows:r,cols:i}]of o.entries())se(e,t,s+n,r[0],i[0]);s+=n}}function Yt(e,t){const n=e.pages.length,{nbPages:o,positions:r}=ee("runes",[t]);for(let t=0;t<o;t++){const n=le(e,"Runes");0===t&&ie(n,!0)}for(const[t,{page:o,rows:s,cols:i}]of r.entries())se(e,t,n+o,s[0],i[0])}function Qt(e,t){return l[e.runewordId].levelReq-l[t.runewordId].levelReq}function Vt(e,t){var n,o,r,s;const i=Q(e),a=Q(t);return dt.indexOf(i.type)-dt.indexOf(a.type)||a.qlevel-i.qlevel||(null!==(n=t.sockets)&&void 0!==n?n:0)-(null!==(o=e.sockets)&&void 0!==o?o:0)||(null!==(r=t.quality)&&void 0!==r?r:0)-(null!==(s=e.quality)&&void 0!==s?s:0)}function Kt(e,t){if(0===t.length)return;const n=[],o=[];for(const e of t)e.runeword?n.push(e):o.push(e);n.sort(Qt),o.sort(Vt);let r=e.pages.length;[["Runewords",n],["Bases",o]].forEach((([t,n],o)=>{const{nbPages:s,positions:i}=ee("lines",[n]);for(let n=0;n<s;n++){const r=le(e,t);0===n&&ie(r,0===o)}for(const[t,{page:n,rows:o,cols:s}]of i.entries())se(e,t,r+n,o[0],s[0]);r+=s}))}function Xt(e,t,{positions:n},o){var r;const s=new Map,i=[];for(const a of t){const t=ct(a);if(!t){i.push(a);continue}const l=null!==(r=s.get(t))&&void 0!==r?r:0,c=n.get(t);if(!c)throw new Error(`Unknown position for grail item ${t.name}`);const{page:u,rows:d,cols:f}=c;l>=d.length*f.length?i.push(a):(se(e,a,u+o,d[l%d.length],f[Math.floor(l/d.length)]),s.set(t,l+1))}return i}function Zt(e,t){return dt.indexOf(Q(e).type)-dt.indexOf(Q(t).type)}function en(e,t){const n=wt(t),o=function(){const e=wt(s),t=new Map;for(const[n,o]of e)t.set(n,ee("set",[o]));return t}();let r=e.pages.length;for(const t of _t)t.forEach((({name:t,shortName:s,set:i},a)=>{ie(le(e,t),0===a);const l=Xt(e,n.get(v[i]),o.get(v[i]),r);if(r++,l.length>0){l.sort(Zt);const{nbPages:t,positions:n}=ee("lines",[l]);for(let n=0;n<t;n++)le(e,`Extra ${s}`);for(const[t,{page:o,rows:s,cols:i}]of n.entries())se(e,t,r+o,s[0],i[0]);r+=t}}))}function tn(e){var t;const n=mt(e),o=new Map;for(const[e,r]of n)o.set(e,ee(null!==(t=e.layout)&&void 0!==t?t:"tier-lines",r));return o}function nn(e,t){var n,o;const s=Q(e),i=Q(t);return(null!==(n=t.quality)&&void 0!==n?n:0)-(null!==(o=e.quality)&&void 0!==o?o:0)||i.qlevel-s.qlevel||(t.unique?r[t.unique].qlevel:0)-(e.unique?r[e.unique].qlevel:0)}function on(e,t){const n=ht(t,!1),o=tn(!1),r=tn(!0);let s=e.pages.length;for(const t of ut)t.forEach(((t,i)=>{var a,l,c;const{name:u,shortName:d}=t,f=o.get(t),h=r.get(t);if(!f)throw new Error(`No template for ${u}`);for(let t=0;t<f.nbPages;t++){const n=le(e,u);0===t&&ie(n,0===i)}for(let t=0;t<(null!==(a=null==h?void 0:h.nbPages)&&void 0!==a?a:0);t++)le(e,`Eth ${d}`);const p=null===(l=n.get(t))||void 0===l?void 0:l[0];if(!p)return void(s+=f.nbPages+(null!==(c=null==h?void 0:h.nbPages)&&void 0!==c?c:0));null==p||p.sort(((e,t)=>Number(e.ethereal)-Number(t.ethereal)));let m=Xt(e,p,f,s);if(s+=f.nbPages,h){const t=m.filter((e=>!e.ethereal||!pt(e)));t.push(...Xt(e,m.filter((e=>e.ethereal&&pt(e))),h,s)),m=t,s+=h.nbPages}if(m.length>0){m.sort(nn);const t=m.reduce(((e,t)=>{var n,o;let r=e.length-1;return(null===(o=null===(n=e[r])||void 0===n?void 0:n[0])||void 0===o?void 0:o.quality)!==t.quality&&(r=e.push([])-1),e[r].push(t),e}),[]),{nbPages:n,positions:o}=ee("lines",t);for(let t=0;t<n;t++)le(e,`Extra ${d}`);for(const[t,{page:n,rows:r,cols:i}]of o.entries())se(e,t,s+n,r[0],i[0]);s+=n}}))}function rn(e,t=0,n=0){const o=yt(e,!0).length,r=function(e,t,n=e.pages.length){const o=e.pages.splice(t,n-t),r=[];for(const{items:e}of o)r.push(...e);return r}(e,t);for(let t=0;t<n;t++)le(e,"Misc");const s=function(e){const t=new Map(At.map((e=>[e,[]])));for(const n of e)t.get(Ut(n)).push(n);return t}(r);for(const t of At){const n=s.get(t);if(n)switch(t){case"unknown":Dt(e,n);break;case"rejuvs":Rt(e,n);break;case"respecs":ue(e,n);break;case"ubers":fe(e,n);break;case"gems":Jt(e,n);break;case"runes":Yt(e,n);break;case"runewords":Kt(e,n);break;case"sets":en(e,n);break;case"uniques":on(e,n);break;default:throw new Error("Unknown section sectionId")}}if(yt(e,!0).length!==o)throw new Error("Lost items in the process, cancelling")}function sn(e){return function(t){e(Number(t.target.value))}}function an(){const{stash:e,setStash:t}=Ze(it),[n,o]=Qe(1),[r,s]=Qe(0),i=Xe((async()=>{if(e)try{const o={...e};rn(o,n,r);const s=He(o);await Ie(s),t(o),function(e){const t=window.document.createElement("a");t.href=window.URL.createObjectURL(e),t.download=e.name,document.body.appendChild(t),t.click(),document.body.removeChild(t)}(s)}catch(e){throw"message"in e&&alert(e.message),e}}),[e,n,r,t]);return G(j,{children:[G("p",{children:G("label",{children:["Do not touch the first"," ",G("input",{type:"number",min:0,max:99,value:n,onChange:sn(o)},void 0)," ","page",1===n?"":"s","."]},void 0)},void 0),G("p",{children:G("label",{children:["Leave"," ",G("input",{type:"number",min:0,max:99,value:r,onChange:sn(s)},void 0)," ","empty page",1===r?"":"s"," at the start."]},void 0)},void 0),G("p",{children:G("button",Object.assign({class:"button",disabled:!e,onClick:i},{children:"Organize my stash"}),void 0)},void 0)]},void 0)}function ln({hash:e,isHome:t,children:n}){const o=location.hash===e||t&&""===location.hash;return G("a",Object.assign({class:o?"nav-link active":"nav-link",href:e},{children:n}),void 0)}function cn(){const[e,t]=Qe(location.hash);Ve((()=>{const e=()=>t(location.hash);return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)}),[]);const n=Ke((()=>{switch(e){case"#organize":return G(an,{},void 0);case"#grail-tracker":return G($t,{},void 0);default:return G(Lt,{},void 0)}}),[e]);return G(j,{children:[G("nav",Object.assign({id:"navigation"},{children:[G(ln,Object.assign({hash:"#stash",isHome:!0},{children:"My stash"}),void 0),G(ln,Object.assign({hash:"#organize"},{children:"Organize"}),void 0),G(ln,Object.assign({hash:"#grail-tracker"},{children:"Grail tracker"}),void 0)]}),void 0),n]},void 0)}function un(){return G("div",Object.assign({id:"app"},{children:G(at,{children:[G(Y,{},void 0),G("h1",{children:["Diablo 2 PlugY Stash Organizer",G(lt,{},void 0)]},void 0),G(cn,{},void 0)]},void 0)}),void 0)}!function(e,t,n){var o,r,s;_.__&&_.__(e,t),r=(o="function"==typeof n)?null:n&&n.__k||t.__k,s=[],B(t,e=(!o&&n||t).__k=function(e,t,n){var o,r,s,i=arguments,a={};for(s in t)"key"==s?o=t[s]:"ref"==s?r=t[s]:a[s]=t[s];if(arguments.length>3)for(n=[n],s=3;s<arguments.length;s++)n.push(i[s]);if(null!=n&&(a.children=n),"function"==typeof e&&null!=e.defaultProps)for(s in e.defaultProps)void 0===a[s]&&(a[s]=e.defaultProps[s]);return q(e,a,o,r,null)}(j,null,[e]),r||k,k,void 0!==t.ownerSVGElement,!o&&n?[n]:r?null:t.firstChild?x.slice.call(t.childNodes):null,s,!o&&n?n:r?r.__e:t.firstChild,o),R(s,e)}(G(un,{},void 0),document.body,document.getElementById("app"));export{un as App};
